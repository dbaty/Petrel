<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal">
<head>
  <title>
    <metal:title metal:define-slot="title"></metal:title>
  </title>
  <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
  <link rel="icon" type="image/x-icon"
        tal:condition="None and 'FIXME'"
        tal:attributes="href api.static_url('static/img/favicon.ico')" />
  <link rel="stylesheet" type="text/css"
        tal:attributes="href api.static_url('static/css/main.css')"/>
  <script type="text/javascript"
          tal:attributes="src api.static_url('static/js/jquery-1.4.2.min.js')">
  </script>
  <script type="text/javascript"
          tal:attributes="src api.static_url('static/js/utils.js')"></script>
  <metal:html-head metal:define-slot="html-head"/><!-- FIXME: needed? -->
</head>
<body>

  <div id="header">
    <a tal:attributes="href api.site.get_url(request)"
       tal:content="api.site.title"/>
  </div>

  <ol id="breadcrumbs"
      tal:define="breadcrumbs context.get_breadcrumbs()">
    <li tal:repeat="obj breadcrumbs[:-1]">
      <a tal:attributes="href obj.get_url(request)"
         tal:content="obj.title"/>
    </li>
    <li class="currentInBreadcrumbs" tal:content="breadcrumbs[-1].title"/>
  </ol>

  <ol id="navtree"
      tal:content="structure api.get_nav_tree()">
  </ol>

  <div id="content">
    <div class="statusMessage"
         tal:condition="api.status_message"
         tal:content="api.status_message"/>
    <div class="errorMessage"
         tal:condition="api.error_message"
         tal:content="api.error_message"/>

    <ol id="actions">
      <li tal:attributes="class 'action lastAction'
                              if not addable_types else 'action'">
        <a tal:attributes="href '%s/edit_form' % context_url">Edit</a>
      </li>
      <li tal:condition="addable_types"
          class="action lastAction dropdownController">
        <a href="#" onclick="return false;">Add content&hellip;</a>
        <ol class="dropdown">
          <li tal:repeat="type addable_types">
            <a tal:attributes="href '%s/%s' % (context_url, type[1])"
               tal:content="type[0]"/>
          </li>
        </ol>
      </li>
    </ol>

    <metal:content metal:define-slot="content"/>
  </div>

  <!-- FIXME: do we need a footer at all? Could we not move this information on the same line as the breadcrumbs? -->
  <ol id="footer" tal:condition="None">
    <li tal:condition="not api.user_cn and api.show_login_link">
      <a tal:attributes="href api.urlOf('login_form?manual=1')">log in</a>
    </li>
    <li tal:condition="api.user_cn">
      <a tal:attributes="href api.urlOf('logout')">log out</a>
    </li>
  </ol>

</body>
</html>
