<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal">
<head>
  <title>
    <metal:title metal:define-slot="title"></metal:title>
  </title>
  <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
  <link rel="icon" type="image/x-icon"
        tal:condition="None and 'FIXME'"
        tal:attributes="href api.static_url('static/img/favicon.ico')" />
  <link rel="stylesheet" type="text/css"
        tal:attributes="href api.static_url('static/css/main.css')"/>
  <script type="text/javascript"
          tal:condition="python: load_editor or load_jquery"
          tal:attributes="src api.static_url('static/js/jquery-1.4.2.min.js')">
  </script>
  <tal:wysiwyg-editor tal:condition="load_editor">
    <script type="text/javascript"
            tal:attributes="src api.static_url('static/js/cleditor.min.js')">
    </script>
      <link rel="stylesheet" type="text/css"
            tal:attributes="href api.static_url('static/css/cleditor.css')"/>
    <script type="text/javascript">
      $(document).ready(function() {
         // FIXME: we could store the name of the HTML fields in 'load_editor'
        $("#body").cleditor();
      });
    </script>
  </tal:wysiwyg-editor>
  <!-- FIXME: conditionally load this file. It's needed only for folder listing  -->
  <script type="text/javascript"
          tal:attributes="src api.static_url('static/js/utils.js')"></script>
  <metal:html-head metal:define-slot="html-head"/><!-- FIXME: needed? -->
</head>
<body>

  <div id="header">
    <a tal:attributes="href api.site.get_url(request)"
       tal:content="api.site.title"/>
  </div>

  <ol id="breadcrumbs"
      tal:define="breadcrumbs context.get_breadcrumbs()">
    <li tal:repeat="obj breadcrumbs[:-1]">
      <a tal:attributes="href obj.get_url(request)"
         tal:content="obj.title"/>
    </li>
    <li class="currentInBreadcrumbs" tal:content="breadcrumbs[-1].title"/>
  </ol>

  <ol id="navtree"
      tal:content="structure api.get_nav_tree()">
  </ol>

  <div id="content">
    <div class="statusMessage"
         tal:condition="api.status_message"
         tal:content="api.status_message"/>
    <div class="errorMessage"
         tal:condition="api.error_message"
         tal:content="api.error_message"/>

    <ol id="actions">
      <li tal:condition="addable_types"
          class="action firstAction dropdownController">
        <a href="#" onclick="return false;">Add content&hellip;</a>
        <ol class="dropdown">
          <li tal:repeat="type addable_types">
            <a tal:attributes="href '%s/%s' % (context_url, type[1])"
               tal:content="type[0]"/>
          </li>
        </ol>
      </li>
      <li tal:attributes="class 'action firstAction'
                              if not addable_types else 'action'">
        <a tal:attributes="href '%s/edit_form' % context_url">Edit</a>
      </li>
    </ol>

    <metal:content metal:define-slot="content"/>
  </div>

  <ol id="footer">
    <li>
      <a tal:attributes="href api.url_of('search_form')">search form</a>
    </li>
    <li>
      <a tal:attributes="href api.url_of('sitemap')">site map</a>
    </li>
  </ol>

</body>
</html>
